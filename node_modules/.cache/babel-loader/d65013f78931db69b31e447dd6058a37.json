{"ast":null,"code":"const updateCartItems = (cartItems, item, idx) => {\n  if (item.count === 0) {\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\n  }\n\n  if (idx === -1) {\n    return [...cartItems, item];\n  }\n\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\n};\n\nconst updateCartItem = (book, item = {}, quantity) => {\n  const {\n    id = book.id,\n    count = 0,\n    title = book.title,\n    total = 0\n  } = item;\n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: total + quantity * book.price\n  };\n};\n\nconst updateOrder = (state, bookId, quantity) => {\n  const {\n    bookList: {\n      books\n    },\n    shoppingCart: {\n      cartItems\n    }\n  } = state;\n  const book = books.find(({\n    id\n  }) => id === bookId);\n  const itemIndex = cartItems.findIndex(({\n    id\n  }) => id === bookId);\n  const item = cartItems[itemIndex];\n  const newItem = updateCartItem(book, item, quantity);\n  return {\n    orderTotal: 0,\n    cartItems: updateCartItems(cartItems, newItem, itemIndex)\n  };\n};\n\nconst updateShoppingCart = (state, action) => {\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0\n    };\n  }\n\n  switch (action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state, action.payload, 1);\n\n    case 'BOOK_REMOVED_FROM_CART':\n      return updateOrder(state, action.payload, -1);\n\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\n      const item = state.shoppingCart.cartItems.find(({\n        id\n      }) => id === action.payload);\n      return updateOrder(state, action.payload, -item.count);\n\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;","map":{"version":3,"sources":["/Users/yeldarlimton/Documents/spring-client/src/reducers/shopping-cart.js"],"names":["updateCartItems","cartItems","item","idx","count","slice","updateCartItem","book","quantity","id","title","total","price","updateOrder","state","bookId","bookList","books","shoppingCart","find","itemIndex","findIndex","newItem","orderTotal","updateShoppingCart","action","undefined","type","payload"],"mappings":"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","sourcesContent":["const updateCartItems = (cartItems, item, idx) => {\n\n  if (item.count === 0) {\n    return [\n      ...cartItems.slice(0, idx),\n      ...cartItems.slice(idx + 1)\n    ];\n  }\n\n  if (idx === -1) {\n    return [\n      ...cartItems,\n      item\n    ];\n  }\n\n  return [\n    ...cartItems.slice(0, idx),\n    item,\n    ...cartItems.slice(idx + 1)\n  ];\n};\n\nconst updateCartItem = (book, item = {}, quantity) => {\n\n  const {\n    id = book.id,\n    count = 0,\n    title = book.title,\n    total = 0 } = item;\n\n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: total + quantity*book.price,\n\n\n  };\n};\n\nconst updateOrder = (state, bookId, quantity) => {\n  const { bookList: { books }, shoppingCart: { cartItems }} = state;\n\n  const book = books.find(({id}) => id === bookId);\n  const itemIndex = cartItems.findIndex(({id}) => id === bookId);\n  const item = cartItems[itemIndex];\n\n  const newItem = updateCartItem(book, item, quantity);\n  return {\n    orderTotal: 0,\n    cartItems: updateCartItems(cartItems, newItem, itemIndex)\n  };\n};\n\nconst updateShoppingCart = (state, action) => {\n\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0,\n    }\n  }\n\n  switch(action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state, action.payload, 1);\n\n    case 'BOOK_REMOVED_FROM_CART':\n      return updateOrder(state, action.payload, -1);\n\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\n      const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload);\n      return updateOrder(state, action.payload, -item.count);\n\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;\n"]},"metadata":{},"sourceType":"module"}